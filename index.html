<!DOCTYPE html>
<html lang="en">

<head>
    <title>Mojira Helper Messages</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="shortcut icon" href="favicon.ico" />
    <script src="https://kit.fontawesome.com/76ec3903cc.js" crossorigin="anonymous"></script>
</head>

<body>
    <div class="background container-fluid">
        <div class="main">
            <h2 class="display-4">Mojira Helper Message Web Application</h2>
            <div class="alert alert-warning">
                <button type="button" class="btn-close float-end" data-bs-dismiss="alert" aria-hidden="true"></button>
                <div class="icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                Please note that these messages may only be used by Mojira helpers and moderators.
            </div>
            <div class="selector">
                <select class="form-select me-sm-2">
                    <input type="text" id="searchInput" class="form-control" placeholder="Search for a message..." onkeyup="filterMessages()">
                    <option value="0" selected>Select a message</option>
                </select>
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle align-baseline" type="button" id="dropdownMenuButton"
                        data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Project: MC
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton" id="projectDropdownMenu">
                    </ul>
                </div>
            </div>
            <div class="inputarea">
                <div class="stdtext">
                    <p class="text-body-secondary" id="msginfo">Please select a message.</p>
                </div>
            </div>
            <button type="button" class="btn btn-outline-secondary" id="copybutton" data-toggle="tooltip"
                data-placement="top" title="Copied!" disabled>Copy</button>
            <div class="footer">
                <small class="text-body-secondary">Made by <a href="https://bugs.mojang.com/secure/ViewProfile.jspa?name=Bemoty"
                        target="_blank">Bemoty</a></small>
            </div>
        </div>
    </div>

    <!-- Import JS Bundle -->
    <script src="bundle.js"></script>
    <script>
        function populateMessages() {
            const messageSelect = document.getElementById("messageSelect");
            messages.forEach((message, index) => {
                const option = document.createElement("option")
                option.value = index;
                option.textContent = message;
                messageSelect.appendChild(option);
            });
        }
        function filterMessages() {
            const input = document.getElementById("searchInput").value.toLowerCase();
            const messageSelect = document.getElementById("messageSelect");
            const options = messageSelect.getElementsByTagName("option");

            for (let i = 1; i < options.length; i++) {
                const message = options[i].textContent.toLowerCase();
                if (message.includes(input)) {
                    options[i].style.display = "";
                } else {
                    options[i].style.display = "none";
                }
            }
        }

        // Enable copy button when a message is selected
        function selectMessage() {
            const selectedOption = document.getElementById("messageSelect").value;
            if (selectedOption != "0") {
                document.getElementById("msginfo").textContent = messages[selectedOption];
                document.getElementById("copybutton").disabled = false;
            } else {
                document.getElementById("msginfo").textContent = "Please select a message.";
                document.getElementById("copybutton").disabled = true;
            }
        }

        // Copy the selected message to clipboard
        function copyToClipboard() {
            const selectedMessage = document.getElementById("msginfo").textContent;
            navigator.clipboard.writeText(selectedMessage).then(() => {
                alert("Message copied to clipboard!");
            }).catch(err => {
                console.error("Failed to copy message: ", err);
            });
        }

        // Initialize the app
        populateMessages();
    </script>
</body>
</html>